service: service
provider:
  name: aws

functions:
  default:
    handler: index.handler
    events:
      - alb:
          listenerArn: 'arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/my-load-balancer/50dc6c495c0c9188/f2f7dc8efc522ab2'
          conditions:
            path: '/'
          priority: 1
  enabledTrue:
    handler: index.handler
    events:
      - alb:
          listenerArn: 'arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/my-load-balancer/50dc6c495c0c9188/f2f7dc8efc522ab2'
          conditions:
            path: '/'
          priority: 2
          healthCheck: true
  enabledFalse:
    handler: index.handler
    events:
      - alb:
          listenerArn: 'arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/my-load-balancer/50dc6c495c0c9188/f2f7dc8efc522ab2'
          conditions:
            path: '/'
          priority: 3
          healthCheck: false
  enabledAdvanced:
    handler: index.handler
    events:
      - alb:
          listenerArn: 'arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/my-load-balancer/50dc6c495c0c9188/f2f7dc8efc522ab2'
          conditions:
            path: '/'
          priority: 4
          healthCheck:
            path: /health
            intervalSeconds: 70
            timeoutSeconds: 50
            healthyThresholdCount: 7
            unhealthyThresholdCount: 7
            matcher:
              httpCode: '200-299'
  enabledAdvancedPartial:
    handler: index.handler
    events:
      - alb:
          listenerArn: 'arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/my-load-balancer/50dc6c495c0c9188/f2f7dc8efc522ab2'
          conditions:
            path: '/'
          priority: 5
          healthCheck:
            path: /health
            intervalSeconds: 70
